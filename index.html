<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>PAEI Block</title>
<style>
  body { font-family: Arial; background:#fafafa; padding:20px; }
  .block { background:white; padding:20px; border-radius:12px; box-shadow:0 0 8px rgba(0,0,0,0.1); max-width:400px; margin:auto; }
  .question { margin-bottom:20px; }
  label { font-weight:bold; display:block; margin-bottom:4px; }
  .options label { font-weight:normal; margin-right:8px; }
  .sum { font-weight:bold; margin-top:10px; color:#333; }
</style>
</head>
<body>

<div class="block" id="block1">
  <div class="question" data-q="A">
    <label>А. Залучений</label>
    <div class="options">
      <label><input type="radio" name="A" value="1">1</label>
      <label><input type="radio" name="A" value="2">2</label>
      <label><input type="radio" name="A" value="3">3</label>
      <label><input type="radio" name="A" value="4">4</label>
    </div>
  </div>
  <div class="question" data-q="B">
    <label>Б. Сумнівний</label>
    <div class="options">
      <label><input type="radio" name="B" value="1">1</label>
      <label><input type="radio" name="B" value="2">2</label>
      <label><input type="radio" name="B" value="3">3</label>
      <label><input type="radio" name="B" value="4">4</label>
    </div>
  </div>
  <div class="question" data-q="C">
    <label>В. Яскравий</label>
    <div class="options">
      <label><input type="radio" name="C" value="1">1</label>
      <label><input type="radio" name="C" value="2">2</label>
      <label><input type="radio" name="C" value="3">3</label>
      <label><input type="radio" name="C" value="4">4</label>
    </div>
  </div>
  <div class="question" data-q="D">
    <label>Г. Чуйний</label>
    <div class="options">
      <label><input type="radio" name="D" value="1">1</label>
      <label><input type="radio" name="D" value="2">2</label>
      <label><input type="radio" name="D" value="3">3</label>
      <label><input type="radio" name="D" value="4">4</label>
    </div>
  </div>
  <div class="sum">Сума: <span id="sum1">0</span> / 10</div>
</div>

<script>
const block = document.getElementById('block1');
const sumDisplay = document.getElementById('sum1');
const radios = block.querySelectorAll('input[type="radio"]');
const questions = ['A','B','C','D'];
const minPerQ = 1;
const maxTotal = 10;

function getCurrentValues() {
  return questions.map(q => {
    const checked = block.querySelector(`input[name="${q}"]:checked`);
    return checked ? parseInt(checked.value) : 0;
  });
}

function updateAvailability() {
  const values = getCurrentValues();
  const total = values.reduce((a,b)=>a+b,0);
  sumDisplay.textContent = total;

  const remaining = maxTotal - total;

  questions.forEach((q,i)=>{
    const currentVal = values[i];
    const inputs = block.querySelectorAll(`input[name="${q}"]`);

    inputs.forEach(inp=>{
      inp.disabled = false;

      const val = parseInt(inp.value);

      // Ensure at least 1 point per question
      if (currentVal === 0 && val === 0) inp.disabled = true;

      // Disable if would exceed total
      if (val - currentVal > remaining) inp.disabled = true;

      // Always allow lowering selection
      if (val <= currentVal) inp.disabled = false;
    });
  });
}

// initialize with 1 point each
questions.forEach(q=>{
  block.querySelector(`input[name="${q}"][value="${minPerQ}"]`).checked = true;
});
updateAvailability();

radios.forEach(r=>r.addEventListener('change', updateAvailability));
</script>

</body>
</html>
